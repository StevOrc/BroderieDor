<div id="navbas">
  <nav role="navigation" id="navNavbas">
      <ul>
          <li><a href="#" class="linkNavbas"><i class="fas fa-home"></i> Home</a></li>
          <!-- Loop *ngFor on listThemes to genrate nav menu links depending on theme in Database.theme-->
          <li *ngFor="let theme of listThemes"><a [attr.href]="'home#jum' + theme.nom" target="_self"
              class="linkNavbas">{{theme.name}}</a></li>
          <li><a href="/produit" class="linkNavbas">Boutique d'Or</a></li>
          <li><a href="home#contact" target="_self" class="linkNavbas">Contact</a></li>
      </ul>
  </nav>
</div>

<h3 *ngIf="!isLogged">
  Vous n'êtes pas connecté
</h3>
<p *ngIf="!isLogged" class="messageLoggedOut">Connectez vous pour accéder à votre Dashboard</p>

<main *ngIf="isLogged" class="container-fluid">
      <div class="table-wrapper col-lg-7">
          <section class="table-title">
              <div class="row">
                  <div class="col-sm-6">
          <h2>Gestion des produits</h2>
        </div>
        <div class="col-sm-6">					
        </div>
              </div>
            </section>
          <table class="table table-striped table-hover">
            <thead>
                <tr>
                  <th>id produit</th><th>Nom</th><th>prix</th><th>stock</th> <th>Selectionner</th>
                </tr>     
            </thead>
            <tbody>
              <tr *ngFor="let produit of produits">
                <td> {{produit.idProduct}} </td>
                <td> {{produit.name}} </td>
                <td> {{produit.price}} </td>
                <td> {{produit.stock}} </td>
                <td class="crudTD">
                    <button class="btn" (click)="operation = 'ADD'; initProduit()">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button class="btn" (click)="selectedProduit = produit; operation = 'EDIT'">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn" (click)="selectedProduit = produit; operation = 'REMOVE'">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </td>
              </tr>
                <tr>
            </tbody>
          </table>
      </div>

      <!-- FORM FOR CRUD PRODUCT -->
      <div *ngIf="operation == 'ADD' || operation == 'EDIT'" class="col-lg-4" >
      <form [formGroup]="crudProductForm">
        <strong>
          <p class="titleForm"> {{ operation == 'ADD' ? 'Ajouter produit' :
               operation == 'EDIT' ? 'Modifier produit' : ''
            }} 
          </p>
      </strong>
        <p *ngIf="operation == 'EDIT'">Id produit : {{selectedProduit.idProduct}} </p>
        <div class="input-group">
          <label for="">Nom</label>
          <input type="text" class="form-control" formControlName="name"
          [(ngModel)]="selectedProduit.name">
        </div>
        <div class="input-group">
            <label for="">Prix</label>
            <input type="text" class="form-control" formControlName="price"
            [(ngModel)]="selectedProduit.price">
        </div>
        <div class="input-group">
              <label for="">Stock</label>
              <input type="text" class="form-control" formControlName="stock"
              [(ngModel)]="selectedProduit.stock">
        </div>
        <div class="input-group">
            <button class="btn btn-success" (click)="operation == 'ADD' ? addProduct() : updateProduct()">Valider</button>
      </div>
      </form>
    </div>

    <div *ngIf="operation == 'REMOVE'" class="col-lg-4" >
        <section>
          <strong>
            <p class="titleForm"> Supprimer Produit
            </p>
        </strong>
          <p *ngIf="operation == 'REMOVE'">Id produit : {{selectedProduit.idProduct}} </p>

          <p> Nom produit : {{selectedProduit.name}} </p>

          <p> Prix : {{selectedProduit.price}} </p>

          <p> Stock : {{selectedProduit.stock}} </p>

          <p> Souhaitez-vous supprimer le produit ?</p>

          <button class="btn btn-danger" (click)="deleteProduct()">Supprimer</button>
        </section>
    </div>
</main>